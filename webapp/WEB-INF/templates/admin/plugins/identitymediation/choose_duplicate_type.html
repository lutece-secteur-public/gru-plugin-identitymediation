<#assign sorted_duplicate_rule_list = duplicate_rule_list?sort_by("duplicateCount")?reverse>
<#assign totalDuplicates = 0>
<#list duplicate_rule_list as rule>
    <#assign totalDuplicates += rule.duplicateCount?number>
</#list>
<#assign title><strong>${totalDuplicates}</strong> <#if totalDuplicates gt 1>#i18n{identitymediation.choose_duplicate_type.pendingDuplicates}<#else>#i18n{identitymediation.choose_duplicate_type.pendingDuplicate}</#if></#assign>
<@pageContainer>
    <@pageColumn id="search-identity-column">
        <div class="jumbotron jumbotron-fluid d-flex align-items-center justify-content-center text-center">
            <div class="mb-4">
                <@pageHeader title=title description='#i18n{identitymediation.choose_duplicate_type.pageTitle}'>
                    <span class="total-duplicates">
                    </span>
                </@pageHeader>
                <@messages infos=infos />
                <@messages errors=errors />
                <@messages warnings=warnings />
            </div>
        </div>
        <div class="container">
            <div class="row" >
				<#list sorted_duplicate_rule_list as rule>
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="card h-100 rule-card pb-3">
                        <div class="card-body">
                            <div class="d-flex justify-content-between"> 
                                <h5 class="card-title mt-2 text-break pe-3">${rule.name}</h5>
                                <#if rule.duplicateCount?number gt 0>
                                    <div>
                                        <@tag color="danger">${rule.duplicateCount}</@tag>
                                    </div>
                                <#else>
                                    <div>
                                        <@tag color="success">${rule.duplicateCount}</@tag>
                                    </div>
                                </#if>
                            </div>
                            <p class="card-text mt-2"><pre class="pre-mediation">${rule.description}</pre></p>
                        </div>
                        <div class="d-flex justify-content-center">
                            <#if rule.duplicateCount?number == 0>
                                <a href="#" class="btn btn-success  disabled"><i class="ti ti-check"></i> #i18n{identitymediation.choose_duplicate_type.emptyDuplicate}</a>
                            <#else>
                                <a href="jsp/admin/plugins/identitymediation/IdentityDuplicate.jsp?view_searchDuplicates&code=${rule.code}" class="btn btn-primary">#i18n{identitymediation.choose_duplicate_type.buttonRun} <i class="ti ti-arrow-narrow-right"></i> </a>
                            </#if>
                        </div>
                    </div>
                </div>
                </#list>
            </div>
        </div>
    </@pageColumn>
</@pageContainer>
<style>
    .pre-mediation {
        background: inherit !important;
        color: inherit !important;
        font-family: inherit !important;
        padding: 0 !important;
        border-radius: unset !important;
        font-size: inherit !important;
    }
</style>